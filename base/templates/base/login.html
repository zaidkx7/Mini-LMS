{% extends 'base/main.html' %}
{% load static %}

{% block title %}Login - Mini LMS{% endblock %}

{% block content %}
<div class="flex min-h-screen items-center justify-center px-4 py-12 sm:px-6 lg:px-8">
  <div class="w-full max-w-md">

    <!-- Login Card -->
    <div class="bg-white rounded-lg shadow-md border border-gray-200 p-8">

      <!-- Logo and Title -->
      <div class="text-center mb-8">
        <img src="{% static 'images/lms_logo.png' %}" alt="LMS Logo" class="mx-auto h-12 w-auto mb-4">
        <h2 class="text-2xl font-semibold text-gray-900">Welcome Back</h2>
        <p class="mt-2 text-sm text-gray-600">Sign in to your account</p>
      </div>

      <!-- Error Messages -->
      {% if messages %}
      <div class="mb-6 rounded-md bg-red-50 border border-red-200 p-4">
        {% for message in messages %}
        <div class="flex items-start">
          <svg class="h-5 w-5 text-red-600 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <p class="ml-3 text-sm text-red-800">{{ message }}</p>
        </div>
        {% endfor %}
      </div>
      {% endif %}

      <!-- Login Form -->
      <form action="" method="post" class="space-y-6">
        {% csrf_token %}

        <!-- Registration Number Input -->
        <div>
          <label for="reg_no" class="block text-sm font-medium text-gray-700 mb-2">
            Registration Number
          </label>
          <div class="relative">
            <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
              <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
              </svg>
            </div>
            <input
              type="text"
              name="reg_no"
              id="reg_no"
              required
              class="block w-full rounded-md border border-gray-300 py-2.5 pl-10 pr-3 text-gray-900 placeholder-gray-400 focus:border-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-600/20 sm:text-sm"
              placeholder="Enter your registration number"
            >
          </div>
        </div>

        <!-- Password Input -->
        <div>
          <label for="password" class="block text-sm font-medium text-gray-700 mb-2">
            Password
          </label>
          <div class="relative">
            <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
              <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
              </svg>
            </div>
            <input
              type="password"
              name="password"
              id="password_field"
              required
              class="block w-full rounded-md border border-gray-300 py-2.5 pl-10 pr-10 text-gray-900 placeholder-gray-400 focus:border-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-600/20 sm:text-sm"
              placeholder="Enter your password"
            >
            <button
              type="button"
              id="toggle_password"
              class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600"
            >
              <svg id="eye_icon" class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
              </svg>
            </button>
          </div>
        </div>

        <!-- Login Button -->
        <div>
          <button
            type="submit"
            class="w-full rounded-md bg-gray-900 px-4 py-2.5 text-sm font-semibold text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2"
          >
            Sign In
          </button>
        </div>
      </form>

      <!-- Footer Link -->
      <div class="mt-6 text-center">
        <p class="text-xs text-gray-600">
          For any issues contact
          <a href="https://zaidkx7.github.io/" target="_blank" class="font-medium text-gray-900 hover:text-gray-700">
            Muhammad Zaid
          </a>
        </p>
      </div>
    </div>
  </div>
</div>

<!-- Password Toggle Script -->
<script>
  const togglePassword = document.getElementById('toggle_password');
  const passwordField = document.getElementById('password_field');
  const eyeIcon = document.getElementById('eye_icon');

  togglePassword.addEventListener('click', () => {
    const type = passwordField.type === 'password' ? 'text' : 'password';
    passwordField.type = type;

    // Toggle icon (simple approach without changing SVG path)
    if (type === 'text') {
      eyeIcon.style.opacity = '0.5';
    } else {
      eyeIcon.style.opacity = '1';
    }
  });
</script>
{% endblock %}
